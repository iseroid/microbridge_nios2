DE0-Nano & USB Host Shield で MicroBridge を実現

  - DE0-Nano の GPIO0 ピンヘッダに USB Host Shield を接続します
    ピンの割り当ては QSF ファイルを参照 or 変更してください
  - USB Host Shield は旧版を改造して使っています
    新版でも大丈夫と思います
    改造は 5V レギュレータを除去して、DE0-Nano から +5V 供給するようにしています
  - QuartusII 11.0SP1 Web Edition を使っています
  - FPGA 内は Nios2/e と標準ペリフェラルの PIO, SPI を使って
    Host Shield の MAX3421E と通信しています

ビルド～実行の手順

  - NiosII Command Shell を起動します
  - カレントディレクトリをこの README が存在するディレクトリにします
  - build.sh を実行します
  - Quartus Programmer で SOF ファイルをダウンロードして、
    nios2-terminal で出力メッセージを確認します

GUI で手動でビルドする手順
  - QuartusII でプロジェクト開きます
  - QuartusII から SOPC Builder 起動して Generate します
    - BSP の generate には sopcinfo が必要なので先に SOPC Builder 実行が必要です
  - SOPC Builder は終了させて OK です
  - QuartusII はそのままで、NiosII 用の Eclipse 起動します
  - Import Nis II Software Build Tool Project で BSP とアプリをそれぞれ import します
  - BSP を generate します
    - git には最小限のファイルしか入れていないし、パスとか変化しているので generate が必要になります
  - アプリをビルドします
    - 普通に Build ではなく Make Targets から mem_init_install を Build
    - これで、QuartusII のディレクトリの onchip_memory2_0.hex が更新されるはずです
  - Eclipse 終了させて OK です
  - QuartusII に戻って論理合成実行します
    - これで mb_de0nano.sof が生成されているはずです

